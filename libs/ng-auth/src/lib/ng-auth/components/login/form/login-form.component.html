<div
  class="min-h-screen flex items-center justify-center p-4 bg-gradient-to-br from-indigo-950 via-purple-950 to-pink-950 relative overflow-hidden">

  <ar-background-decor [onlyIcons]="true" />

  <!-- Animated Background Pattern -->
  <div class="absolute inset-0 opacity-20">
    <div class="absolute inset-0"
         [attr.style]="'background-image: url(\'data:image/svg+xml,%3Csvg width=\'60\' height=\'60\' viewBox=\'0 0 60 60\' xmlns=\'http://www.w3.org/2000/svg\'%3E%3Cg fill=\'none\' fill-rule=\'evenodd\'%3E%3Cg fill=\'%239C92AC\' fill-opacity=\'0.1\'%3E%3Cpath d=\'M36 34v-4h-2v4h-4v2h4v4h2v-4h4v-2h-4zm0-30V0h-2v4h-4v2h4v4h2V6h4V4h-4zM6 34v-4H4v4H0v2h4v4h2v-4h4v-2H6zM6 4V0H4v4H0v2h4v4h2V6h4V4H6z\'/ %3E%3C/g%3E%3C/g%3E%3C/svg%3E\');'">
    </div>
  </div>

  <!-- Floating Gradient Orbs -->
  <div
    class="absolute top-0 left-0 w-96 h-96 bg-purple-600 rounded-full filter blur-[128px] opacity-30 animate-pulse"></div>
  <div class="absolute bottom-0 right-0 w-96 h-96 bg-pink-600 rounded-full filter blur-[128px] opacity-30 animate-pulse"
       style="animation-delay: 2s;"></div>
  <div
    class="absolute top-1/2 left-1/2 -translate-x-1/2 -translate-y-1/2 w-96 h-96 bg-indigo-600 rounded-full filter blur-[128px] opacity-20 animate-pulse"
    style="animation-delay: 4s;"></div>

  <!-- Login Card -->
  <div class="relative z-10 w-full max-w-md">

    <!-- Glassmorphism Card -->
    <div class="relative bg-white/10 backdrop-blur-2xl rounded-3xl shadow-2xl border border-white/20 p-8 md:p-10">

      <!-- Animated Border Gradient -->
      <div
        class="absolute inset-0 rounded-3xl bg-gradient-to-r from-purple-500/20 via-pink-500/20 to-indigo-500/20 animate-gradient-xy"></div>

      <!-- Content Container -->
      <div class="relative z-10">

        <!-- Logo Section -->
        <div class="text-center mb-8">
          <div
            class="inline-flex items-center justify-center w-20 h-20 rounded-full bg-gradient-to-br from-purple-500 to-pink-600 shadow-lg mb-4 animate-float">
            @if (logoCard) {
              <img [src]="logoCard" alt="Logo" [class]="logoStyle" />
            } @else if (iconCard) {
              <i [class]="iconCard"></i>
            }
          </div>
          <h1 class="text-3xl font-bold text-white mb-2">{{ title }}</h1>
          <p class="text-white/60 text-sm">{{ subtitle }}</p>
        </div>

        <!-- Login Form -->
        <form [formGroup]="loginForm" id="login-form" class="space-y-6">

          <!-- Email Field -->
          <div class="space-y-2">
            <label for="email" class="block text-sm font-medium text-white/80">Email Address</label>
            <div class="relative w-full">
              <i class="pi pi-envelope absolute left-2 top-1/2 -translate-y-1/2 text-white/40"></i>
              <input
                pInputText
                id="email"
                type="email"
                formControlName="email"
                placeholder="your@email.com"
                class="!pl-8 w-full !bg-white/10 !border-white/20 !text-white placeholder:!text-white/40
                       focus:!bg-white/15 focus:!border-purple-400/50 focus:!shadow-[0_0_0_0.2rem_rgba(168,85,247,0.2)]
                       hover:!bg-white/15 transition-all duration-200"
                [ngClass]="{'!border-red-400/50': emailControl?.invalid && emailControl?.touched}"
                (focus)="emailFocused.set(true)"
                (blur)="emailFocused.set(false)" />
            </div>

            <!-- Email Errors -->
            <div *ngIf="emailErrors().length > 0" class="space-y-1 animate-slideDown">
              <p *ngFor="let error of emailErrors()" class="text-red-400 text-xs flex items-center gap-1">
                <i class="pi pi-exclamation-circle text-[10px]"></i>
                {{ error }}
              </p>
            </div>
          </div>

          <!-- Password Field -->
          <div class="space-y-2">
            <label for="password" class="block text-sm font-medium text-white/80">Password</label>
            <div class="relative">
              <div class="relative w-full">
                <i class="pi pi-lock absolute left-2 top-1/2 -translate-y-1/2 text-white/40"></i>
                <input
                  pInputText
                  id="password"
                  [type]="showPassword() ? 'text' : 'password'"
                  formControlName="password"
                  placeholder="••••••••"
                  class="w-full !pl-8 !bg-white/10 !border-white/20 !text-white placeholder:!text-white/40 !pr-12
                         focus:!bg-white/15 focus:!border-purple-400/50 focus:!shadow-[0_0_0_0.2rem_rgba(168,85,247,0.2)]
                         hover:!bg-white/15 transition-all duration-200"
                  [ngClass]="{'!border-red-400/50': passwordControl?.invalid && passwordControl?.touched}"
                  (focus)="passwordFocused.set(true)"
                  (blur)="passwordFocused.set(false)" />
              </div>

              <!-- Password Toggle Button -->
              <button
                type="button"
                (click)="togglePasswordVisibility()"
                class="absolute right-3 top-1/2 -translate-y-1/2 text-white/40 hover:text-white/60 transition-colors">
                <i [class]="showPassword() ? 'pi pi-eye-slash' : 'pi pi-eye'"></i>
              </button>
            </div>

            <!-- Password Strength Indicator -->
            <!--<div *ngIf="passwordControl?.value && passwordFocused()" class="mt-2">
              <div class="h-1 bg-white/10 rounded-full overflow-hidden">
                <div class="h-full transition-all duration-300"
                     [ngClass]="{
                       'w-1/3 bg-red-500': passwordStrength() === 'weak',
                       'w-2/3 bg-yellow-500': passwordStrength() === 'medium',
                       'w-full bg-green-500': passwordStrength() === 'strong'
                     }">
                </div>
              </div>
              <p class="text-xs mt-1"
                 [class.text-red-400]="passwordStrength() === 'weak'"
                 [class.text-yellow-400]="passwordStrength() === 'medium'"
                 [class.text-green-400]="passwordStrength() === 'strong'">
                {{ passwordStrength() === 'weak' ? 'Weak password' :
                passwordStrength() === 'medium' ? 'Medium strength' :
                  passwordStrength() === 'strong' ? 'Strong password' : '' }}
              </p>
            </div>-->
            <!-- Password Errors -->
            <div *ngIf="passwordErrors().length > 0" class="space-y-1 animate-slideDown">
              <p *ngFor="let error of passwordErrors()" class="text-red-400 text-xs flex items-center gap-1">
                <i class="pi pi-exclamation-circle text-[10px]"></i>
                {{ error }}
              </p>
            </div>
          </div>
          <!-- Remember Me & Forgot Password -->
          <div class="flex items-center justify-between">
            <div class="flex items-center">
              @if (showRememberMe) {
                <p-checkbox
                  inputId="rememberMe"
                  formControlName="rememberMe"
                  [binary]="true"
                  class="[&_.p-checkbox-box]:!bg-white/10 [&_.p-checkbox-box]:!border-white/20
                             [&_.p-checkbox-box.p-highlight]:!bg-purple-500 [&_.p-checkbox-box.p-highlight]:!border-purple-500">
                </p-checkbox>
                <label for="rememberMe" class="ml-2 text-sm text-white/60 cursor-pointer">Remember me</label>
              }
            </div>
            @if (showForgotPassword) {
              <button
                type="button"
                (click)="onForgotPassword()"
                class="text-sm text-purple-400 hover:text-purple-300 transition-colors cursor-pointer">
                Forgot password?
              </button>
            }

          </div>
          <!-- Server Error Message -->
          <p-message
            *ngIf="serverError()"
            severity="error"
            [text]="serverError()"
            styleClass="w-full [&_.p-message]:!bg-red-500/10 [&_.p-message]:!border-red-500/20 [&_.p-message-text]:!text-red-400"
            (close)="clearServerError()">
          </p-message>
          <!-- Submit Button -->
          <p-button
            type="submit"
            [label]="loading() ? 'Signing in...' : 'Sign In'"
            [icon]="loading() ? 'pi pi-spin pi-spinner' : 'pi pi-sign-in'"
            [disabled]="loading()"
            (onClick)="onSubmit()"
            styleClass="w-full !flex !flex-row !gap-4 !bg-gradient-to-r !from-purple-600 !to-pink-600 !border-0 !py-3
                         hover:!from-purple-700 hover:!to-pink-700 !transition-all !duration-300
                         hover:!shadow-lg hover:!shadow-purple-500/25 hover:!-translate-y-0.5
                         disabled:!opacity-50 disabled:!cursor-not-allowed disabled:hover:!translate-y-0"
            [loading]="loading()">
          </p-button>
        </form>
        <!-- Divider -->
        <div class="flex flex-row my-8">
          <div class="w-full inset-0 flex items-center">
            <div class="w-full border-t border-white/10"></div>
          </div>
          <div class="w-full flex justify-center text-sm">
            <span class="px-2 bg-transparent text-white/40">Or continue with</span>
          </div>
          <div class="w-full inset-0 flex items-center">
            <div class="w-full border-t border-white/10"></div>
          </div>
        </div>
        <!-- Social Login Options -->
        <div class="flex flex-row justify-center w-full gap-2 mb-6">
          @if (showGoogleLogin) {
            <button class="flex items-center justify-center py-2 px-4 rounded-lg bg-white/10 border border-white/20
                             hover:bg-white/20 transition-all duration-200 group cursor-pointer basis-2/7">
              <i class="pi pi-google text-white/60 group-hover:text-white/80"></i>
            </button>
          }
          @if (showGithubLogin) {
            <button class="flex items-center justify-center py-2 px-4 rounded-lg bg-white/10 border border-white/20
                             hover:bg-white/20 transition-all duration-200 group cursor-pointer basis-2/7">
              <i class="pi pi-github text-white/60 group-hover:text-white/80"></i>
            </button>
          }
          @if (showAppleLogin) {
            <button class="flex items-center justify-center py-2 px-4 rounded-lg bg-white/10 border border-white/20
                             hover:bg-white/20 transition-all duration-200 group cursor-pointer basis-2/7">
              <i class="pi pi-apple text-white/60 group-hover:text-white/80"></i>
            </button>
          }
        </div>
        <!-- Create Account Link -->
        @if (showCreateAccount) {
          <p-button
            type="button"
            label="Create New Account"
            icon="pi pi-user-plus"
            (onClick)="onCreateAccount()"
            [outlined]="true"
            styleClass="w-full !flex !flex-row !gap-4 !border-white/20 !text-white/80 hover:!bg-white/10
                       hover:!border-purple-400/50 hover:!text-white !transition-all !duration-300">
          </p-button>
        }
      </div>
    </div>
    <!-- Bottom Decoration -->
    <div
      class="absolute -bottom-1 left-0 right-0 h-px bg-gradient-to-r from-transparent via-purple-500/50 to-transparent"></div>
  </div>
</div>
